//! @file
//! 
//! This source file was generated from CellML.
//! 
//! Model: Noble_SAN_model_1989
//! 
//! Processed by pycml - CellML Tools in Python
//!     (translators: , pycml: , optimize: )
//! on Wed Sep 11 11:23:29 2019
//! 
//! <autogenerated>

#include "noble_SAN_model_1989.hpp"
#include <cmath>
#include <cassert>
#include <memory>
#include "Exception.hpp"
#include "OdeSystemInformation.hpp"
#include "RegularStimulus.hpp"
#include "HeartConfig.hpp"
#include "IsNan.hpp"
#include "MathsCustomFunctions.hpp"

    Dynamicnoble_SAN_model_1989FromCellML::Dynamicnoble_SAN_model_1989FromCellML(boost::shared_ptr<AbstractIvpOdeSolver> pSolver, boost::shared_ptr<AbstractStimulusFunction> pIntracellularStimulus)
        : AbstractCardiacCell(
                pSolver,
                14,
                0,
                pIntracellularStimulus)
    {
        // Time units: millisecond
        // 
        this->mpSystemInfo = OdeSystemInformation<Dynamicnoble_SAN_model_1989FromCellML>::Instance();
        Init();

    }
    
    Dynamicnoble_SAN_model_1989FromCellML::~Dynamicnoble_SAN_model_1989FromCellML()
    {
    }
    
    double Dynamicnoble_SAN_model_1989FromCellML::GetIIonic(const std::vector<double>* pStateVariables)
    {
        // For state variable interpolation (SVI) we read in interpolated state variables,
        // otherwise for ionic current interpolation (ICI) we use the state variables of this model (node).
        if (!pStateVariables) pStateVariables = &rGetStateVariables();
        const std::vector<double>& rY = *pStateVariables;
        double var_chaste_interface__membrane__V = (mSetVoltageDerivativeToZero ? this->mFixedVoltage : rY[0]);
        // Units: millivolt; Initial value: -69.1865
        double var_chaste_interface__hyperpolarising_activated_current_y_gate__y = rY[1];
        // Units: dimensionless; Initial value: 0.0822
        double var_chaste_interface__time_dependent_potassium_current_x_gate__x = rY[2];
        // Units: dimensionless; Initial value: 0.1231
        double var_chaste_interface__fast_sodium_current_m_gate__m = rY[3];
        // Units: dimensionless; Initial value: 0.0365
        double var_chaste_interface__fast_sodium_current_h_gate__h = rY[4];
        // Units: dimensionless; Initial value: 0.1969
        double var_chaste_interface__second_inward_current_d_gate__d = rY[5];
        // Units: dimensionless; Initial value: 0
        double var_chaste_interface__second_inward_current_f_gate__f = rY[6];
        // Units: dimensionless; Initial value: 0.9997
        double var_chaste_interface__second_inward_current_f2_gate__f2 = rY[7];
        // Units: dimensionless; Initial value: 0.5765
        double var_chaste_interface__intracellular_sodium_concentration__Nai = rY[8];
        // Units: millimolar; Initial value: 7.5
        double var_chaste_interface__intracellular_calcium_concentration__Cai = rY[9];
        // Units: millimolar; Initial value: 5.6e-5
        double var_chaste_interface__intracellular_potassium_concentration__Ki = rY[13];
        // Units: millimolar; Initial value: 140
        
        const double var_membrane__R = 8314.4719999999998; // joule_per_kilomole_kelvin
        const double var_membrane__T = 310.0; // kelvin
        const double var_membrane__F = 96485.341499999995; // coulomb_per_mole
        const double var_membrane__C = 6.0000000000000002e-05; // microF
        const double var_membrane__RTONF = (var_membrane__R * var_membrane__T) / var_membrane__F; // millivolt
        const double var_hyperpolarising_activated_current__y = var_chaste_interface__hyperpolarising_activated_current_y_gate__y; // dimensionless
        const double var_extracellular_potassium_concentration__Kc = 3.0; // millimolar
        const double var_hyperpolarising_activated_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_hyperpolarising_activated_current__Km_f = 45.0; // millimolar
        const double var_hyperpolarising_activated_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_extracellular_sodium_concentration__Nao = 140.0; // millimolar
        const double var_hyperpolarising_activated_current__Nao = var_extracellular_sodium_concentration__Nao; // millimolar
        const double var_hyperpolarising_activated_current__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_hyperpolarising_activated_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_hyperpolarising_activated_current__E_Na = var_hyperpolarising_activated_current__RTONF * log(var_hyperpolarising_activated_current__Nao / var_hyperpolarising_activated_current__Nai); // millivolt
        const double var_hyperpolarising_activated_current__g_f_Na = 0.059999999999999998; // microS
        const double var_hyperpolarising_activated_current__i_fNa = ((pow(var_hyperpolarising_activated_current__y, 2.0) * var_hyperpolarising_activated_current__Kc) / (var_hyperpolarising_activated_current__Kc + var_hyperpolarising_activated_current__Km_f)) * var_hyperpolarising_activated_current__g_f_Na * (var_hyperpolarising_activated_current__V - var_hyperpolarising_activated_current__E_Na); // nanoA
        const double var_hyperpolarising_activated_current__g_f_K = 0.059999999999999998; // microS
        const double var_hyperpolarising_activated_current__Ki = var_chaste_interface__intracellular_potassium_concentration__Ki; // millimolar
        const double var_hyperpolarising_activated_current__E_K = var_hyperpolarising_activated_current__RTONF * log(var_hyperpolarising_activated_current__Kc / var_hyperpolarising_activated_current__Ki); // millivolt
        const double var_hyperpolarising_activated_current__i_fK = ((pow(var_hyperpolarising_activated_current__y, 2.0) * var_hyperpolarising_activated_current__Kc) / (var_hyperpolarising_activated_current__Kc + var_hyperpolarising_activated_current__Km_f)) * var_hyperpolarising_activated_current__g_f_K * (var_hyperpolarising_activated_current__V - var_hyperpolarising_activated_current__E_K); // nanoA
        const double var_hyperpolarising_activated_current__i_f = var_hyperpolarising_activated_current__i_fNa + var_hyperpolarising_activated_current__i_fK; // nanoA
        const double var_time_dependent_potassium_current__Ki = var_chaste_interface__intracellular_potassium_concentration__Ki; // millimolar
        const double var_time_dependent_potassium_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_time_dependent_potassium_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_time_dependent_potassium_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_time_dependent_potassium_current__i_K_max = 0.80000000000000004; // nanoA
        const double var_time_dependent_potassium_current__I_K = (var_time_dependent_potassium_current__i_K_max * (var_time_dependent_potassium_current__Ki - (var_time_dependent_potassium_current__Kc * exp((-var_time_dependent_potassium_current__V) / var_time_dependent_potassium_current__RTONF)))) / 140.0; // nanoA
        const double var_time_dependent_potassium_current__x = var_chaste_interface__time_dependent_potassium_current_x_gate__x; // dimensionless
        const double var_time_dependent_potassium_current__i_K = var_time_dependent_potassium_current__x * var_time_dependent_potassium_current__I_K; // nanoA
        const double var_time_independent_potassium_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_time_independent_potassium_current__E_K = var_hyperpolarising_activated_current__E_K; // millivolt
        const double var_time_independent_potassium_current__Km_K1 = 10.0; // millimolar
        const double var_time_independent_potassium_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_time_independent_potassium_current__g_K1 = 0.0074999999999999997; // microS
        const double var_time_independent_potassium_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_time_independent_potassium_current__i_K1 = (((var_time_independent_potassium_current__g_K1 * var_time_independent_potassium_current__Kc) / (var_time_independent_potassium_current__Kc + var_time_independent_potassium_current__Km_K1)) * (var_time_independent_potassium_current__V - var_time_independent_potassium_current__E_K)) / (1.0 + exp((((var_time_independent_potassium_current__V + 10.0) - var_time_independent_potassium_current__E_K) * 2.0) / var_time_independent_potassium_current__RTONF)); // nanoA
        const double var_sodium_background_current__g_Nab = 0.00069999999999999999; // microS
        const double var_sodium_background_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_sodium_background_current__E_Na = var_hyperpolarising_activated_current__E_Na; // millivolt
        const double var_sodium_background_current__i_Na_b = var_sodium_background_current__g_Nab * (var_sodium_background_current__V - var_sodium_background_current__E_Na); // nanoA
        const double var_calcium_background_current__Cai = var_chaste_interface__intracellular_calcium_concentration__Cai; // millimolar
        const double var_calcium_background_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_extracellular_calcium_concentration__Cao = 2.0; // millimolar
        const double var_calcium_background_current__Cao = var_extracellular_calcium_concentration__Cao; // millimolar
        const double var_calcium_background_current__E_Ca = 0.5 * var_calcium_background_current__RTONF * log(var_calcium_background_current__Cao / var_calcium_background_current__Cai); // millivolt
        const double var_calcium_background_current__g_Cab = 0.0001; // microS
        const double var_calcium_background_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_calcium_background_current__i_Ca_b = var_calcium_background_current__g_Cab * (var_calcium_background_current__V - var_calcium_background_current__E_Ca); // nanoA
        const double var_sodium_potassium_pump__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_sodium_potassium_pump__I_p = 0.45000000000000001; // nanoA
        const double var_sodium_potassium_pump__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_sodium_potassium_pump__K_mNa = 40.0; // millimolar
        const double var_sodium_potassium_pump__K_mK = 1.0; // millimolar
        const double var_sodium_potassium_pump__i_p = (((var_sodium_potassium_pump__I_p * var_sodium_potassium_pump__Kc) / (var_sodium_potassium_pump__K_mK + var_sodium_potassium_pump__Kc)) * var_sodium_potassium_pump__Nai) / (var_sodium_potassium_pump__K_mNa + var_sodium_potassium_pump__Nai); // nanoA
        const double var_Na_Ca_exchanger__n_NaCa = 3.0; // dimensionless
        const double var_Na_Ca_exchanger__Nao = var_extracellular_sodium_concentration__Nao; // millimolar
        const double var_Na_Ca_exchanger__RTONF = var_membrane__RTONF; // millivolt
        const double var_Na_Ca_exchanger__gamma = 0.5; // dimensionless
        const double var_Na_Ca_exchanger__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_Na_Ca_exchanger__K_NaCa = 2.0000000000000002e-05; // nanoA
        const double var_Na_Ca_exchanger__d_NaCa = 0.0001; // dimensionless
        const double var_Na_Ca_exchanger__Cao = var_extracellular_calcium_concentration__Cao; // millimolar
        const double var_Na_Ca_exchanger__V = var_chaste_interface__membrane__V; // millivolt
        const double var_Na_Ca_exchanger__Cai = var_chaste_interface__intracellular_calcium_concentration__Cai; // millimolar
        const double var_Na_Ca_exchanger__i_NaCa = (var_Na_Ca_exchanger__K_NaCa * ((exp((var_Na_Ca_exchanger__gamma * (var_Na_Ca_exchanger__n_NaCa - 2.0) * var_Na_Ca_exchanger__V) / var_Na_Ca_exchanger__RTONF) * pow(var_Na_Ca_exchanger__Nai, var_Na_Ca_exchanger__n_NaCa) * var_Na_Ca_exchanger__Cao) - (exp(((var_Na_Ca_exchanger__gamma - 1.0) * (var_Na_Ca_exchanger__n_NaCa - 2.0) * var_Na_Ca_exchanger__V) / var_Na_Ca_exchanger__RTONF) * pow(var_Na_Ca_exchanger__Nao, var_Na_Ca_exchanger__n_NaCa) * var_Na_Ca_exchanger__Cai))) / ((1.0 + (var_Na_Ca_exchanger__d_NaCa * ((var_Na_Ca_exchanger__Cai * pow(var_Na_Ca_exchanger__Nao, var_Na_Ca_exchanger__n_NaCa)) + (var_Na_Ca_exchanger__Cao * pow(var_Na_Ca_exchanger__Nai, var_Na_Ca_exchanger__n_NaCa))))) * (1.0 + (var_Na_Ca_exchanger__Cai / 0.0068999999999999999))); // nanoA
        const double var_fast_sodium_current__g_Na = 0.012500000000000001; // microS
        const double var_fast_sodium_current__h = var_chaste_interface__fast_sodium_current_h_gate__h; // dimensionless
        const double var_fast_sodium_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_fast_sodium_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_fast_sodium_current__Nao = var_extracellular_sodium_concentration__Nao; // millimolar
        const double var_fast_sodium_current__Ki = var_chaste_interface__intracellular_potassium_concentration__Ki; // millimolar
        const double var_fast_sodium_current__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_fast_sodium_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_fast_sodium_current__E_mh = var_fast_sodium_current__RTONF * log((var_fast_sodium_current__Nao + (0.12 * var_fast_sodium_current__Kc)) / (var_fast_sodium_current__Nai + (0.12 * var_fast_sodium_current__Ki))); // millivolt
        const double var_fast_sodium_current__m = var_chaste_interface__fast_sodium_current_m_gate__m; // dimensionless
        const double var_fast_sodium_current__i_Na = var_fast_sodium_current__g_Na * pow(var_fast_sodium_current__m, 3.0) * var_fast_sodium_current__h * (var_fast_sodium_current__V - var_fast_sodium_current__E_mh); // nanoA
        const double var_second_inward_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_second_inward_current__P_si = 0.12; // nanoA_per_millimolar
        const double var_second_inward_current__d = var_chaste_interface__second_inward_current_d_gate__d; // dimensionless
        const double var_second_inward_current__Cao = var_extracellular_calcium_concentration__Cao; // millimolar
        const double var_second_inward_current__f = var_chaste_interface__second_inward_current_f_gate__f; // dimensionless
        const double var_second_inward_current__f2 = var_chaste_interface__second_inward_current_f2_gate__f2; // dimensionless
        const double var_second_inward_current__Cai = var_chaste_interface__intracellular_calcium_concentration__Cai; // millimolar
        const double var_second_inward_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_second_inward_current__i_siCa = ((4.0 * var_second_inward_current__P_si * (var_second_inward_current__V - 50.0)) / (var_second_inward_current__RTONF * (1.0 - exp(((-1.0) * (var_second_inward_current__V - 50.0) * 2.0) / var_second_inward_current__RTONF)))) * ((var_second_inward_current__Cai * exp(100.0 / var_second_inward_current__RTONF)) - (var_second_inward_current__Cao * exp(((-2.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF))) * var_second_inward_current__d * var_second_inward_current__f * var_second_inward_current__f2; // nanoA
        const double var_second_inward_current__Nao = var_extracellular_sodium_concentration__Nao; // millimolar
        const double var_second_inward_current__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_second_inward_current__i_siNa = ((0.01 * var_second_inward_current__P_si * (var_second_inward_current__V - 50.0)) / (var_second_inward_current__RTONF * (1.0 - exp(((-1.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF)))) * ((var_second_inward_current__Nai * exp(50.0 / var_second_inward_current__RTONF)) - (var_second_inward_current__Nao * exp(((-1.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF))) * var_second_inward_current__d * var_second_inward_current__f * var_second_inward_current__f2; // nanoA
        const double var_second_inward_current__Ki = var_chaste_interface__intracellular_potassium_concentration__Ki; // millimolar
        const double var_second_inward_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_second_inward_current__i_siK = ((0.01 * var_second_inward_current__P_si * (var_second_inward_current__V - 50.0)) / (var_second_inward_current__RTONF * (1.0 - exp(((-1.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF)))) * ((var_second_inward_current__Ki * exp(50.0 / var_second_inward_current__RTONF)) - (var_second_inward_current__Kc * exp(((-1.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF))) * var_second_inward_current__d * var_second_inward_current__f * var_second_inward_current__f2; // nanoA
        const double var_second_inward_current__i_si = var_second_inward_current__i_siCa + var_second_inward_current__i_siK + var_second_inward_current__i_siNa; // nanoA
        const double var_chaste_interface__time_dependent_potassium_current__i_K = var_time_dependent_potassium_current__i_K; // nanoA
        const double var_chaste_interface__time_independent_potassium_current__i_K1 = var_time_independent_potassium_current__i_K1; // nanoA
        const double var_chaste_interface__second_inward_current__i_si = var_second_inward_current__i_si; // nanoA
        const double var_chaste_interface__Na_Ca_exchanger__i_NaCa = var_Na_Ca_exchanger__i_NaCa; // nanoA
        const double var_chaste_interface__fast_sodium_current__i_Na = var_fast_sodium_current__i_Na; // nanoA
        const double var_chaste_interface__calcium_background_current__i_Ca_b = var_calcium_background_current__i_Ca_b; // nanoA
        const double var_chaste_interface__hyperpolarising_activated_current__i_f = var_hyperpolarising_activated_current__i_f; // nanoA
        const double var_chaste_interface__sodium_potassium_pump__i_p = var_sodium_potassium_pump__i_p; // nanoA
        const double var_chaste_interface__sodium_background_current__i_Na_b = var_sodium_background_current__i_Na_b; // nanoA
        const double var_chaste_interface__membrane__C = var_membrane__C; // microF
        const double var_chaste_interface__i_ionic = 0.001 * (((var_chaste_interface__hyperpolarising_activated_current__i_f + var_chaste_interface__time_dependent_potassium_current__i_K + var_chaste_interface__time_independent_potassium_current__i_K1 + var_chaste_interface__sodium_background_current__i_Na_b + var_chaste_interface__calcium_background_current__i_Ca_b + var_chaste_interface__sodium_potassium_pump__i_p + var_chaste_interface__Na_Ca_exchanger__i_NaCa + var_chaste_interface__fast_sodium_current__i_Na + var_chaste_interface__second_inward_current__i_si) / var_chaste_interface__membrane__C) * HeartConfig::Instance()->GetCapacitance()); // uA_per_cm2
        
        const double i_ionic = var_chaste_interface__i_ionic;
        EXCEPT_IF_NOT(!std::isnan(i_ionic));
        return i_ionic;
    }
    
    void Dynamicnoble_SAN_model_1989FromCellML::EvaluateYDerivatives(double var_chaste_interface__environment__time, const std::vector<double>& rY, std::vector<double>& rDY)
    {
        // Inputs:
        // Time units: millisecond
        double var_chaste_interface__membrane__V = (mSetVoltageDerivativeToZero ? this->mFixedVoltage : rY[0]);
        // Units: millivolt; Initial value: -69.1865
        double var_chaste_interface__hyperpolarising_activated_current_y_gate__y = rY[1];
        // Units: dimensionless; Initial value: 0.0822
        double var_chaste_interface__time_dependent_potassium_current_x_gate__x = rY[2];
        // Units: dimensionless; Initial value: 0.1231
        double var_chaste_interface__fast_sodium_current_m_gate__m = rY[3];
        // Units: dimensionless; Initial value: 0.0365
        double var_chaste_interface__fast_sodium_current_h_gate__h = rY[4];
        // Units: dimensionless; Initial value: 0.1969
        double var_chaste_interface__second_inward_current_d_gate__d = rY[5];
        // Units: dimensionless; Initial value: 0
        double var_chaste_interface__second_inward_current_f_gate__f = rY[6];
        // Units: dimensionless; Initial value: 0.9997
        double var_chaste_interface__second_inward_current_f2_gate__f2 = rY[7];
        // Units: dimensionless; Initial value: 0.5765
        double var_chaste_interface__intracellular_sodium_concentration__Nai = rY[8];
        // Units: millimolar; Initial value: 7.5
        double var_chaste_interface__intracellular_calcium_concentration__Cai = rY[9];
        // Units: millimolar; Initial value: 5.6e-5
        double var_chaste_interface__intracellular_calcium_concentration__Ca_up = rY[10];
        // Units: millimolar; Initial value: 2.3909
        double var_chaste_interface__intracellular_calcium_concentration__Ca_rel = rY[11];
        // Units: millimolar; Initial value: 0.2207
        double var_chaste_interface__intracellular_calcium_concentration__p = rY[12];
        // Units: dimensionless; Initial value: 0.237
        double var_chaste_interface__intracellular_potassium_concentration__Ki = rY[13];
        // Units: millimolar; Initial value: 140
        
        
        // Mathematics
        double d_dt_chaste_interface__membrane__V;
        const double var_membrane__R = 8314.4719999999998; // joule_per_kilomole_kelvin
        const double var_membrane__T = 310.0; // kelvin
        const double var_membrane__F = 96485.341499999995; // coulomb_per_mole
        const double var_membrane__RTONF = (var_membrane__R * var_membrane__T) / var_membrane__F; // millivolt
        const double var_hyperpolarising_activated_current__y = var_chaste_interface__hyperpolarising_activated_current_y_gate__y; // dimensionless
        const double var_extracellular_potassium_concentration__Kc = 3.0; // millimolar
        const double var_hyperpolarising_activated_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_hyperpolarising_activated_current__Km_f = 45.0; // millimolar
        const double var_hyperpolarising_activated_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_extracellular_sodium_concentration__Nao = 140.0; // millimolar
        const double var_hyperpolarising_activated_current__Nao = var_extracellular_sodium_concentration__Nao; // millimolar
        const double var_hyperpolarising_activated_current__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_hyperpolarising_activated_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_hyperpolarising_activated_current__E_Na = var_hyperpolarising_activated_current__RTONF * log(var_hyperpolarising_activated_current__Nao / var_hyperpolarising_activated_current__Nai); // millivolt
        const double var_hyperpolarising_activated_current__g_f_Na = 0.059999999999999998; // microS
        const double var_hyperpolarising_activated_current__i_fNa = ((pow(var_hyperpolarising_activated_current__y, 2.0) * var_hyperpolarising_activated_current__Kc) / (var_hyperpolarising_activated_current__Kc + var_hyperpolarising_activated_current__Km_f)) * var_hyperpolarising_activated_current__g_f_Na * (var_hyperpolarising_activated_current__V - var_hyperpolarising_activated_current__E_Na); // nanoA
        const double var_hyperpolarising_activated_current__g_f_K = 0.059999999999999998; // microS
        const double var_hyperpolarising_activated_current__Ki = var_chaste_interface__intracellular_potassium_concentration__Ki; // millimolar
        const double var_hyperpolarising_activated_current__E_K = var_hyperpolarising_activated_current__RTONF * log(var_hyperpolarising_activated_current__Kc / var_hyperpolarising_activated_current__Ki); // millivolt
        const double var_hyperpolarising_activated_current__i_fK = ((pow(var_hyperpolarising_activated_current__y, 2.0) * var_hyperpolarising_activated_current__Kc) / (var_hyperpolarising_activated_current__Kc + var_hyperpolarising_activated_current__Km_f)) * var_hyperpolarising_activated_current__g_f_K * (var_hyperpolarising_activated_current__V - var_hyperpolarising_activated_current__E_K); // nanoA
        const double var_time_dependent_potassium_current__Ki = var_chaste_interface__intracellular_potassium_concentration__Ki; // millimolar
        const double var_time_dependent_potassium_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_time_dependent_potassium_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_time_dependent_potassium_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_time_dependent_potassium_current__i_K_max = 0.80000000000000004; // nanoA
        const double var_time_dependent_potassium_current__I_K = (var_time_dependent_potassium_current__i_K_max * (var_time_dependent_potassium_current__Ki - (var_time_dependent_potassium_current__Kc * exp((-var_time_dependent_potassium_current__V) / var_time_dependent_potassium_current__RTONF)))) / 140.0; // nanoA
        const double var_time_dependent_potassium_current__x = var_chaste_interface__time_dependent_potassium_current_x_gate__x; // dimensionless
        const double var_time_dependent_potassium_current__i_K = var_time_dependent_potassium_current__x * var_time_dependent_potassium_current__I_K; // nanoA
        const double var_time_independent_potassium_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_time_independent_potassium_current__E_K = var_hyperpolarising_activated_current__E_K; // millivolt
        const double var_time_independent_potassium_current__Km_K1 = 10.0; // millimolar
        const double var_time_independent_potassium_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_time_independent_potassium_current__g_K1 = 0.0074999999999999997; // microS
        const double var_time_independent_potassium_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_time_independent_potassium_current__i_K1 = (((var_time_independent_potassium_current__g_K1 * var_time_independent_potassium_current__Kc) / (var_time_independent_potassium_current__Kc + var_time_independent_potassium_current__Km_K1)) * (var_time_independent_potassium_current__V - var_time_independent_potassium_current__E_K)) / (1.0 + exp((((var_time_independent_potassium_current__V + 10.0) - var_time_independent_potassium_current__E_K) * 2.0) / var_time_independent_potassium_current__RTONF)); // nanoA
        const double var_sodium_background_current__g_Nab = 0.00069999999999999999; // microS
        const double var_sodium_background_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_sodium_background_current__E_Na = var_hyperpolarising_activated_current__E_Na; // millivolt
        const double var_sodium_background_current__i_Na_b = var_sodium_background_current__g_Nab * (var_sodium_background_current__V - var_sodium_background_current__E_Na); // nanoA
        const double var_calcium_background_current__Cai = var_chaste_interface__intracellular_calcium_concentration__Cai; // millimolar
        const double var_calcium_background_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_extracellular_calcium_concentration__Cao = 2.0; // millimolar
        const double var_calcium_background_current__Cao = var_extracellular_calcium_concentration__Cao; // millimolar
        const double var_calcium_background_current__E_Ca = 0.5 * var_calcium_background_current__RTONF * log(var_calcium_background_current__Cao / var_calcium_background_current__Cai); // millivolt
        const double var_calcium_background_current__g_Cab = 0.0001; // microS
        const double var_calcium_background_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_calcium_background_current__i_Ca_b = var_calcium_background_current__g_Cab * (var_calcium_background_current__V - var_calcium_background_current__E_Ca); // nanoA
        const double var_sodium_potassium_pump__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_sodium_potassium_pump__I_p = 0.45000000000000001; // nanoA
        const double var_sodium_potassium_pump__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_sodium_potassium_pump__K_mNa = 40.0; // millimolar
        const double var_sodium_potassium_pump__K_mK = 1.0; // millimolar
        const double var_sodium_potassium_pump__i_p = (((var_sodium_potassium_pump__I_p * var_sodium_potassium_pump__Kc) / (var_sodium_potassium_pump__K_mK + var_sodium_potassium_pump__Kc)) * var_sodium_potassium_pump__Nai) / (var_sodium_potassium_pump__K_mNa + var_sodium_potassium_pump__Nai); // nanoA
        const double var_Na_Ca_exchanger__n_NaCa = 3.0; // dimensionless
        const double var_Na_Ca_exchanger__Nao = var_extracellular_sodium_concentration__Nao; // millimolar
        const double var_Na_Ca_exchanger__RTONF = var_membrane__RTONF; // millivolt
        const double var_Na_Ca_exchanger__gamma = 0.5; // dimensionless
        const double var_Na_Ca_exchanger__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_Na_Ca_exchanger__K_NaCa = 2.0000000000000002e-05; // nanoA
        const double var_Na_Ca_exchanger__d_NaCa = 0.0001; // dimensionless
        const double var_Na_Ca_exchanger__Cao = var_extracellular_calcium_concentration__Cao; // millimolar
        const double var_Na_Ca_exchanger__V = var_chaste_interface__membrane__V; // millivolt
        const double var_Na_Ca_exchanger__Cai = var_chaste_interface__intracellular_calcium_concentration__Cai; // millimolar
        const double var_Na_Ca_exchanger__i_NaCa = (var_Na_Ca_exchanger__K_NaCa * ((exp((var_Na_Ca_exchanger__gamma * (var_Na_Ca_exchanger__n_NaCa - 2.0) * var_Na_Ca_exchanger__V) / var_Na_Ca_exchanger__RTONF) * pow(var_Na_Ca_exchanger__Nai, var_Na_Ca_exchanger__n_NaCa) * var_Na_Ca_exchanger__Cao) - (exp(((var_Na_Ca_exchanger__gamma - 1.0) * (var_Na_Ca_exchanger__n_NaCa - 2.0) * var_Na_Ca_exchanger__V) / var_Na_Ca_exchanger__RTONF) * pow(var_Na_Ca_exchanger__Nao, var_Na_Ca_exchanger__n_NaCa) * var_Na_Ca_exchanger__Cai))) / ((1.0 + (var_Na_Ca_exchanger__d_NaCa * ((var_Na_Ca_exchanger__Cai * pow(var_Na_Ca_exchanger__Nao, var_Na_Ca_exchanger__n_NaCa)) + (var_Na_Ca_exchanger__Cao * pow(var_Na_Ca_exchanger__Nai, var_Na_Ca_exchanger__n_NaCa))))) * (1.0 + (var_Na_Ca_exchanger__Cai / 0.0068999999999999999))); // nanoA
        const double var_fast_sodium_current__g_Na = 0.012500000000000001; // microS
        const double var_fast_sodium_current__h = var_chaste_interface__fast_sodium_current_h_gate__h; // dimensionless
        const double var_fast_sodium_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_fast_sodium_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_fast_sodium_current__Nao = var_extracellular_sodium_concentration__Nao; // millimolar
        const double var_fast_sodium_current__Ki = var_chaste_interface__intracellular_potassium_concentration__Ki; // millimolar
        const double var_fast_sodium_current__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_fast_sodium_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_fast_sodium_current__E_mh = var_fast_sodium_current__RTONF * log((var_fast_sodium_current__Nao + (0.12 * var_fast_sodium_current__Kc)) / (var_fast_sodium_current__Nai + (0.12 * var_fast_sodium_current__Ki))); // millivolt
        const double var_fast_sodium_current__m = var_chaste_interface__fast_sodium_current_m_gate__m; // dimensionless
        const double var_fast_sodium_current__i_Na = var_fast_sodium_current__g_Na * pow(var_fast_sodium_current__m, 3.0) * var_fast_sodium_current__h * (var_fast_sodium_current__V - var_fast_sodium_current__E_mh); // nanoA
        const double var_second_inward_current__V = var_chaste_interface__membrane__V; // millivolt
        const double var_second_inward_current__P_si = 0.12; // nanoA_per_millimolar
        const double var_second_inward_current__d = var_chaste_interface__second_inward_current_d_gate__d; // dimensionless
        const double var_second_inward_current__Cao = var_extracellular_calcium_concentration__Cao; // millimolar
        const double var_second_inward_current__f = var_chaste_interface__second_inward_current_f_gate__f; // dimensionless
        const double var_second_inward_current__f2 = var_chaste_interface__second_inward_current_f2_gate__f2; // dimensionless
        const double var_second_inward_current__Cai = var_chaste_interface__intracellular_calcium_concentration__Cai; // millimolar
        const double var_second_inward_current__RTONF = var_membrane__RTONF; // millivolt
        const double var_second_inward_current__i_siCa = ((4.0 * var_second_inward_current__P_si * (var_second_inward_current__V - 50.0)) / (var_second_inward_current__RTONF * (1.0 - exp(((-1.0) * (var_second_inward_current__V - 50.0) * 2.0) / var_second_inward_current__RTONF)))) * ((var_second_inward_current__Cai * exp(100.0 / var_second_inward_current__RTONF)) - (var_second_inward_current__Cao * exp(((-2.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF))) * var_second_inward_current__d * var_second_inward_current__f * var_second_inward_current__f2; // nanoA
        const double var_second_inward_current__Nao = var_extracellular_sodium_concentration__Nao; // millimolar
        const double var_second_inward_current__Nai = var_chaste_interface__intracellular_sodium_concentration__Nai; // millimolar
        const double var_second_inward_current__i_siNa = ((0.01 * var_second_inward_current__P_si * (var_second_inward_current__V - 50.0)) / (var_second_inward_current__RTONF * (1.0 - exp(((-1.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF)))) * ((var_second_inward_current__Nai * exp(50.0 / var_second_inward_current__RTONF)) - (var_second_inward_current__Nao * exp(((-1.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF))) * var_second_inward_current__d * var_second_inward_current__f * var_second_inward_current__f2; // nanoA
        const double var_second_inward_current__Ki = var_chaste_interface__intracellular_potassium_concentration__Ki; // millimolar
        const double var_second_inward_current__Kc = var_extracellular_potassium_concentration__Kc; // millimolar
        const double var_second_inward_current__i_siK = ((0.01 * var_second_inward_current__P_si * (var_second_inward_current__V - 50.0)) / (var_second_inward_current__RTONF * (1.0 - exp(((-1.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF)))) * ((var_second_inward_current__Ki * exp(50.0 / var_second_inward_current__RTONF)) - (var_second_inward_current__Kc * exp(((-1.0) * (var_second_inward_current__V - 50.0)) / var_second_inward_current__RTONF))) * var_second_inward_current__d * var_second_inward_current__f * var_second_inward_current__f2; // nanoA
        const double var_hyperpolarising_activated_current_y_gate__speed_y = 2.0; // dimensionless
        const double var_hyperpolarising_activated_current_y_gate__V = var_hyperpolarising_activated_current__V; // millivolt
        const double var_hyperpolarising_activated_current_y_gate__beta_y = 9.75 * exp(var_hyperpolarising_activated_current_y_gate__V / 19.0); // per_second
        const double var_hyperpolarising_activated_current_y_gate__alpha_y = 0.014 * exp((-var_hyperpolarising_activated_current_y_gate__V) / 16.0); // per_second
        const double var_hyperpolarising_activated_current_y_gate__y = var_hyperpolarising_activated_current__y; // dimensionless
        const double var_hyperpolarising_activated_current_y_gate__d_y_d_environment__time = var_hyperpolarising_activated_current_y_gate__speed_y * ((var_hyperpolarising_activated_current_y_gate__alpha_y * (1.0 - var_hyperpolarising_activated_current_y_gate__y)) - (var_hyperpolarising_activated_current_y_gate__beta_y * var_hyperpolarising_activated_current_y_gate__y)); // per_second
        const double var_hyperpolarising_activated_current__hyperpolarising_activated_current_y_gate__d_y_d_environment__time = var_hyperpolarising_activated_current_y_gate__d_y_d_environment__time; // per_second
        const double var_time_dependent_potassium_current_x_gate__x = var_time_dependent_potassium_current__x; // dimensionless
        const double var_time_dependent_potassium_current_x_gate__V = var_time_dependent_potassium_current__V; // millivolt
        const double var_time_dependent_potassium_current_x_gate__beta_x = 0.95999999999999996 * exp((-var_time_dependent_potassium_current_x_gate__V) / 24.0); // per_second
        const double var_time_dependent_potassium_current_x_gate__alpha_x = 2.1000000000000001 * exp(var_time_dependent_potassium_current_x_gate__V / 28.0); // per_second
        const double var_time_dependent_potassium_current_x_gate__d_x_d_environment__time = (var_time_dependent_potassium_current_x_gate__alpha_x * (1.0 - var_time_dependent_potassium_current_x_gate__x)) - (var_time_dependent_potassium_current_x_gate__beta_x * var_time_dependent_potassium_current_x_gate__x); // per_second
        const double var_time_dependent_potassium_current__time_dependent_potassium_current_x_gate__d_x_d_environment__time = var_time_dependent_potassium_current_x_gate__d_x_d_environment__time; // per_second
        const double var_fast_sodium_current_m_gate__m = var_fast_sodium_current__m; // dimensionless
        const double var_fast_sodium_current_m_gate__V = var_fast_sodium_current__V; // millivolt
        const double var_fast_sodium_current_m_gate__E0_m = var_fast_sodium_current_m_gate__V + 41.0; // millivolt
        const double var_fast_sodium_current_m_gate__delta_m = 1.0000000000000001e-05; // millivolt
        const double var_fast_sodium_current_m_gate__alpha_m = (fabs(var_fast_sodium_current_m_gate__E0_m) < var_fast_sodium_current_m_gate__delta_m) ? 2000.0 : ((200.0 * var_fast_sodium_current_m_gate__E0_m) / (1.0 - exp((-0.10000000000000001) * var_fast_sodium_current_m_gate__E0_m))); // per_second
        const double var_fast_sodium_current_m_gate__beta_m = 8000.0 * exp((-0.056000000000000001) * (var_fast_sodium_current_m_gate__V + 66.0)); // per_second
        const double var_fast_sodium_current_m_gate__d_m_d_environment__time = (var_fast_sodium_current_m_gate__alpha_m * (1.0 - var_fast_sodium_current_m_gate__m)) - (var_fast_sodium_current_m_gate__beta_m * var_fast_sodium_current_m_gate__m); // per_second
        const double var_fast_sodium_current__fast_sodium_current_m_gate__d_m_d_environment__time = var_fast_sodium_current_m_gate__d_m_d_environment__time; // per_second
        const double var_fast_sodium_current_h_gate__V = var_fast_sodium_current__V; // millivolt
        const double var_fast_sodium_current_h_gate__beta_h = 2000.0 / ((320.0 * exp((-0.10000000000000001) * (var_fast_sodium_current_h_gate__V + 75.0))) + 1.0); // per_second
        const double var_fast_sodium_current_h_gate__alpha_h = 20.0 * exp((-0.125) * (var_fast_sodium_current_h_gate__V + 75.0)); // per_second
        const double var_fast_sodium_current_h_gate__h = var_fast_sodium_current__h; // dimensionless
        const double var_fast_sodium_current_h_gate__d_h_d_environment__time = (var_fast_sodium_current_h_gate__alpha_h * (1.0 - var_fast_sodium_current_h_gate__h)) - (var_fast_sodium_current_h_gate__beta_h * var_fast_sodium_current_h_gate__h); // per_second
        const double var_fast_sodium_current__fast_sodium_current_h_gate__d_h_d_environment__time = var_fast_sodium_current_h_gate__d_h_d_environment__time; // per_second
        const double var_second_inward_current_d_gate__V = var_second_inward_current__V; // millivolt
        const double var_second_inward_current_d_gate__E0_d = (var_second_inward_current_d_gate__V + 24.0) - 5.0; // millivolt
        const double var_second_inward_current_d_gate__delta_d = 0.0001; // millivolt
        const double var_second_inward_current_d_gate__alpha_d = (fabs(var_second_inward_current_d_gate__E0_d) < var_second_inward_current_d_gate__delta_d) ? 120.0 : ((30.0 * var_second_inward_current_d_gate__E0_d) / (1.0 - exp(((-1.0) * var_second_inward_current_d_gate__E0_d) / 4.0))); // per_second
        const double var_second_inward_current_d_gate__d = var_second_inward_current__d; // dimensionless
        const double var_second_inward_current_d_gate__beta_d = (fabs(var_second_inward_current_d_gate__E0_d) < var_second_inward_current_d_gate__delta_d) ? 120.0 : ((12.0 * var_second_inward_current_d_gate__E0_d) / (exp(var_second_inward_current_d_gate__E0_d / 10.0) - 1.0)); // per_second
        const double var_second_inward_current_d_gate__d_d_d_environment__time = (var_second_inward_current_d_gate__alpha_d * (1.0 - var_second_inward_current_d_gate__d)) - (var_second_inward_current_d_gate__beta_d * var_second_inward_current_d_gate__d); // per_second
        const double var_second_inward_current__second_inward_current_d_gate__d_d_d_environment__time = var_second_inward_current_d_gate__d_d_d_environment__time; // per_second
        const double var_second_inward_current_f_gate__V = var_second_inward_current__V; // millivolt
        const double var_second_inward_current_f_gate__beta_f = 50.0 / (1.0 + exp(((-1.0) * (var_second_inward_current_f_gate__V + 34.0)) / 4.0)); // per_second
        const double var_second_inward_current_f_gate__f = var_second_inward_current__f; // dimensionless
        const double var_second_inward_current_f_gate__E0_f = var_second_inward_current_f_gate__V + 34.0; // millivolt
        const double var_second_inward_current_f_gate__delta_f = 0.0001; // millivolt
        const double var_second_inward_current_f_gate__alpha_f = (fabs(var_second_inward_current_f_gate__E0_f) < var_second_inward_current_f_gate__delta_f) ? 25.0 : ((6.25 * var_second_inward_current_f_gate__E0_f) / (exp(var_second_inward_current_f_gate__E0_f / 4.0) - 1.0)); // per_second
        const double var_second_inward_current_f_gate__d_f_d_environment__time = (var_second_inward_current_f_gate__alpha_f * (1.0 - var_second_inward_current_f_gate__f)) - (var_second_inward_current_f_gate__beta_f * var_second_inward_current_f_gate__f); // per_second
        const double var_second_inward_current__second_inward_current_f_gate__d_f_d_environment__time = var_second_inward_current_f_gate__d_f_d_environment__time; // per_second
        const double var_second_inward_current_f2_gate__f2 = var_second_inward_current__f2; // dimensionless
        const double var_second_inward_current_f2_gate__alpha_f2 = 10.0; // per_second
        const double var_second_inward_current_f2_gate__Cai = var_second_inward_current__Cai; // millimolar
        const double var_second_inward_current_f2_gate__K_mf2 = 0.00050000000000000001; // millimolar
        const double var_second_inward_current_f2_gate__beta_f2 = (var_second_inward_current_f2_gate__Cai * var_second_inward_current_f2_gate__alpha_f2) / var_second_inward_current_f2_gate__K_mf2; // per_second
        const double var_second_inward_current_f2_gate__d_f2_d_environment__time = var_second_inward_current_f2_gate__alpha_f2 - (var_second_inward_current_f2_gate__f2 * (var_second_inward_current_f2_gate__alpha_f2 + var_second_inward_current_f2_gate__beta_f2)); // per_second
        const double var_second_inward_current__second_inward_current_f2_gate__d_f2_d_environment__time = var_second_inward_current_f2_gate__d_f2_d_environment__time; // per_second
        const double var_intracellular_sodium_concentration__radius = 0.01; // micrometre
        const double var_intracellular_sodium_concentration__length = 0.028000000000000001; // micrometre
        const double var_intracellular_sodium_concentration__V_e_ratio = 0.10000000000000001; // dimensionless
        const double var_intracellular_sodium_concentration__V_Cell = 3.1415926540000001 * pow(var_intracellular_sodium_concentration__radius, 2.0) * var_intracellular_sodium_concentration__length; // micrometre3
        const double var_intracellular_sodium_concentration__Vi = var_intracellular_sodium_concentration__V_Cell * (1.0 - var_intracellular_sodium_concentration__V_e_ratio); // micrometre3
        const double var_intracellular_sodium_concentration__F = var_membrane__F; // coulomb_per_mole
        const double var_intracellular_sodium_concentration__i_Na = var_fast_sodium_current__i_Na; // nanoA
        const double var_intracellular_sodium_concentration__i_Na_b = var_sodium_background_current__i_Na_b; // nanoA
        const double var_intracellular_sodium_concentration__i_siNa = var_second_inward_current__i_siNa; // nanoA
        const double var_intracellular_sodium_concentration__i_p = var_sodium_potassium_pump__i_p; // nanoA
        const double var_intracellular_sodium_concentration__i_fNa = var_hyperpolarising_activated_current__i_fNa; // nanoA
        const double var_intracellular_sodium_concentration__i_NaCa = var_Na_Ca_exchanger__i_NaCa; // nanoA
        const double var_intracellular_sodium_concentration__n_NaCa = var_Na_Ca_exchanger__n_NaCa; // dimensionless
        const double var_intracellular_sodium_concentration__d_Nai_d_environment__time = ((-1.0) * (var_intracellular_sodium_concentration__i_Na + var_intracellular_sodium_concentration__i_Na_b + var_intracellular_sodium_concentration__i_fNa + var_intracellular_sodium_concentration__i_siNa + (var_intracellular_sodium_concentration__i_p * 3.0) + ((var_intracellular_sodium_concentration__i_NaCa * var_intracellular_sodium_concentration__n_NaCa) / (var_intracellular_sodium_concentration__n_NaCa - 2.0)))) / (1.0 * var_intracellular_sodium_concentration__Vi * var_intracellular_sodium_concentration__F); // 'millimole per litre per second'
        const double var_intracellular_calcium_concentration__Cai = var_chaste_interface__intracellular_calcium_concentration__Cai; // millimolar
        const double var_intracellular_calcium_concentration__Vi = var_intracellular_sodium_concentration__Vi; // micrometre3
        const double var_intracellular_calcium_concentration__V_up = var_intracellular_calcium_concentration__Vi * 0.050000000000000003; // micrometre3
        const double var_intracellular_calcium_concentration__V_rel = var_intracellular_calcium_concentration__Vi * 0.02; // micrometre3
        const double var_intracellular_calcium_concentration__tau_up = 0.0050000000000000001; // second
        const double var_intracellular_calcium_concentration__Ca_up_max = 5.0; // millimolar
        const double var_intracellular_calcium_concentration__F = var_membrane__F; // coulomb_per_mole
        const double var_intracellular_calcium_concentration__Ca_up = var_chaste_interface__intracellular_calcium_concentration__Ca_up; // millimolar
        const double var_intracellular_calcium_concentration__i_up = ((2.0 * 1.0 * var_intracellular_calcium_concentration__Vi * var_intracellular_calcium_concentration__F) / (1.0 * var_intracellular_calcium_concentration__tau_up * var_intracellular_calcium_concentration__Ca_up_max)) * var_intracellular_calcium_concentration__Cai * (var_intracellular_calcium_concentration__Ca_up_max - var_intracellular_calcium_concentration__Ca_up); // nanoA
        const double var_intracellular_calcium_concentration__tau_rep = 0.20000000000000001; // second
        const double var_intracellular_calcium_concentration__Ca_rel = var_chaste_interface__intracellular_calcium_concentration__Ca_rel; // millimolar
        const double var_intracellular_calcium_concentration__p = var_chaste_interface__intracellular_calcium_concentration__p; // dimensionless
        const double var_intracellular_calcium_concentration__i_tr = ((2.0 * 1.0 * var_intracellular_calcium_concentration__V_rel * var_intracellular_calcium_concentration__F) / (1.0 * var_intracellular_calcium_concentration__tau_rep)) * var_intracellular_calcium_concentration__p * (var_intracellular_calcium_concentration__Ca_up - var_intracellular_calcium_concentration__Ca_rel); // nanoA
        const double var_intracellular_calcium_concentration__tau_rel = 0.01; // second
        const double var_intracellular_calcium_concentration__rCa = 2.0; // dimensionless
        const double var_intracellular_calcium_concentration__K_mCa = 0.002; // millimolar
        const double var_intracellular_calcium_concentration__i_rel = (((2.0 * 1.0 * var_intracellular_calcium_concentration__V_rel * var_intracellular_calcium_concentration__F) / (1.0 * var_intracellular_calcium_concentration__tau_rel)) * var_intracellular_calcium_concentration__Ca_rel * pow(var_intracellular_calcium_concentration__Cai, var_intracellular_calcium_concentration__rCa)) / (pow(var_intracellular_calcium_concentration__Cai, var_intracellular_calcium_concentration__rCa) + pow(var_intracellular_calcium_concentration__K_mCa, var_intracellular_calcium_concentration__rCa)); // nanoA
        const double var_intracellular_calcium_concentration__V = var_chaste_interface__membrane__V; // millivolt
        const double var_intracellular_calcium_concentration__E0_p = (var_intracellular_calcium_concentration__V + 34.0) - (-30.0); // millivolt
        const double var_intracellular_calcium_concentration__alpha_p = (0.625 * var_intracellular_calcium_concentration__E0_p) / (exp(var_intracellular_calcium_concentration__E0_p / 4.0) - 1.0); // per_second
        const double var_intracellular_calcium_concentration__beta_p = 5.0 / (1.0 + exp(((-1.0) * var_intracellular_calcium_concentration__E0_p) / 4.0)); // per_second
        const double var_intracellular_calcium_concentration__i_Ca_b = var_calcium_background_current__i_Ca_b; // nanoA
        const double var_intracellular_calcium_concentration__i_siCa = var_second_inward_current__i_siCa; // nanoA
        const double var_intracellular_calcium_concentration__i_NaCa = var_Na_Ca_exchanger__i_NaCa; // nanoA
        const double var_intracellular_calcium_concentration__n_NaCa = var_Na_Ca_exchanger__n_NaCa; // dimensionless
        const double var_intracellular_calcium_concentration__d_Cai_d_environment__time = ((-1.0) * ((((var_intracellular_calcium_concentration__i_siCa + var_intracellular_calcium_concentration__i_Ca_b) - ((2.0 * var_intracellular_calcium_concentration__i_NaCa) / (var_intracellular_calcium_concentration__n_NaCa - 2.0))) - var_intracellular_calcium_concentration__i_rel) + var_intracellular_calcium_concentration__i_up)) / (2.0 * 1.0 * var_intracellular_calcium_concentration__Vi * var_intracellular_calcium_concentration__F); // 'millimole per litre per second'
        const double var_intracellular_calcium_concentration__d_Ca_up_d_environment__time = (1.0 * (var_intracellular_calcium_concentration__i_up - var_intracellular_calcium_concentration__i_tr)) / (2.0 * 1.0 * var_intracellular_calcium_concentration__V_up * var_intracellular_calcium_concentration__F); // 'millimole per litre per second'
        const double var_intracellular_calcium_concentration__d_Ca_rel_d_environment__time = (1.0 * (var_intracellular_calcium_concentration__i_tr - var_intracellular_calcium_concentration__i_rel)) / (2.0 * 1.0 * var_intracellular_calcium_concentration__V_rel * var_intracellular_calcium_concentration__F); // 'millimole per litre per second'
        const double var_intracellular_calcium_concentration__d_p_d_environment__time = (var_intracellular_calcium_concentration__alpha_p * (1.0 - var_intracellular_calcium_concentration__p)) - (var_intracellular_calcium_concentration__beta_p * var_intracellular_calcium_concentration__p); // per_second
        const double var_intracellular_potassium_concentration__Vi = var_intracellular_sodium_concentration__Vi; // micrometre3
        const double var_intracellular_potassium_concentration__i_K1 = var_time_independent_potassium_current__i_K1; // nanoA
        const double var_intracellular_potassium_concentration__i_K = var_time_dependent_potassium_current__i_K; // nanoA
        const double var_intracellular_potassium_concentration__i_fK = var_hyperpolarising_activated_current__i_fK; // nanoA
        const double var_intracellular_potassium_concentration__i_siK = var_second_inward_current__i_siK; // nanoA
        const double var_intracellular_potassium_concentration__i_p = var_sodium_potassium_pump__i_p; // nanoA
        const double var_intracellular_potassium_concentration__i_mK = (var_intracellular_potassium_concentration__i_K1 + var_intracellular_potassium_concentration__i_K + var_intracellular_potassium_concentration__i_fK + var_intracellular_potassium_concentration__i_siK) - (2.0 * var_intracellular_potassium_concentration__i_p); // nanoA
        const double var_intracellular_potassium_concentration__F = var_membrane__F; // coulomb_per_mole
        const double var_intracellular_potassium_concentration__d_Ki_d_environment__time = ((-1.0) * var_intracellular_potassium_concentration__i_mK) / (1.0 * var_intracellular_potassium_concentration__Vi * var_intracellular_potassium_concentration__F); // 'millimole per litre per second'
        const double var_chaste_interface__hyperpolarising_activated_current_y_gate__d_y_d_environment__time_converter = var_hyperpolarising_activated_current__hyperpolarising_activated_current_y_gate__d_y_d_environment__time; // per_second
        const double var_chaste_interface__hyperpolarising_activated_current_y_gate__d_y_d_environment__time = 0.001 * var_chaste_interface__hyperpolarising_activated_current_y_gate__d_y_d_environment__time_converter; // 'per millisecond'
        const double var_chaste_interface__time_dependent_potassium_current_x_gate__d_x_d_environment__time_converter = var_time_dependent_potassium_current__time_dependent_potassium_current_x_gate__d_x_d_environment__time; // per_second
        const double var_chaste_interface__time_dependent_potassium_current_x_gate__d_x_d_environment__time = 0.001 * var_chaste_interface__time_dependent_potassium_current_x_gate__d_x_d_environment__time_converter; // 'per millisecond'
        const double var_chaste_interface__fast_sodium_current_m_gate__d_m_d_environment__time_converter = var_fast_sodium_current__fast_sodium_current_m_gate__d_m_d_environment__time; // per_second
        const double var_chaste_interface__fast_sodium_current_m_gate__d_m_d_environment__time = 0.001 * var_chaste_interface__fast_sodium_current_m_gate__d_m_d_environment__time_converter; // 'per millisecond'
        const double var_chaste_interface__fast_sodium_current_h_gate__d_h_d_environment__time_converter = var_fast_sodium_current__fast_sodium_current_h_gate__d_h_d_environment__time; // per_second
        const double var_chaste_interface__fast_sodium_current_h_gate__d_h_d_environment__time = 0.001 * var_chaste_interface__fast_sodium_current_h_gate__d_h_d_environment__time_converter; // 'per millisecond'
        const double var_chaste_interface__second_inward_current_d_gate__d_d_d_environment__time_converter = var_second_inward_current__second_inward_current_d_gate__d_d_d_environment__time; // per_second
        const double var_chaste_interface__second_inward_current_d_gate__d_d_d_environment__time = 0.001 * var_chaste_interface__second_inward_current_d_gate__d_d_d_environment__time_converter; // 'per millisecond'
        const double var_chaste_interface__second_inward_current_f_gate__d_f_d_environment__time_converter = var_second_inward_current__second_inward_current_f_gate__d_f_d_environment__time; // per_second
        const double var_chaste_interface__second_inward_current_f_gate__d_f_d_environment__time = 0.001 * var_chaste_interface__second_inward_current_f_gate__d_f_d_environment__time_converter; // 'per millisecond'
        const double var_chaste_interface__second_inward_current_f2_gate__d_f2_d_environment__time_converter = var_second_inward_current__second_inward_current_f2_gate__d_f2_d_environment__time; // per_second
        const double var_chaste_interface__second_inward_current_f2_gate__d_f2_d_environment__time = 0.001 * var_chaste_interface__second_inward_current_f2_gate__d_f2_d_environment__time_converter; // 'per millisecond'
        const double var_chaste_interface__intracellular_sodium_concentration__d_Nai_d_environment__time_converter = var_intracellular_sodium_concentration__d_Nai_d_environment__time; // ___units_30
        const double var_chaste_interface__intracellular_sodium_concentration__d_Nai_d_environment__time = 0.001 * var_chaste_interface__intracellular_sodium_concentration__d_Nai_d_environment__time_converter; // 'millimolar per millisecond'
        const double var_chaste_interface__intracellular_calcium_concentration__d_Cai_d_environment__time_converter = var_intracellular_calcium_concentration__d_Cai_d_environment__time; // millimole_per_litre_per_second
        const double var_chaste_interface__intracellular_calcium_concentration__d_Cai_d_environment__time = 0.001 * var_chaste_interface__intracellular_calcium_concentration__d_Cai_d_environment__time_converter; // 'millimolar per millisecond'
        const double var_chaste_interface__intracellular_calcium_concentration__d_Ca_up_d_environment__time_converter = var_intracellular_calcium_concentration__d_Ca_up_d_environment__time; // millimole_per_litre_per_second
        const double var_chaste_interface__intracellular_calcium_concentration__d_Ca_up_d_environment__time = 0.001 * var_chaste_interface__intracellular_calcium_concentration__d_Ca_up_d_environment__time_converter; // 'millimolar per millisecond'
        const double var_chaste_interface__intracellular_calcium_concentration__d_Ca_rel_d_environment__time_converter = var_intracellular_calcium_concentration__d_Ca_rel_d_environment__time; // millimole_per_litre_per_second
        const double var_chaste_interface__intracellular_calcium_concentration__d_Ca_rel_d_environment__time = 0.001 * var_chaste_interface__intracellular_calcium_concentration__d_Ca_rel_d_environment__time_converter; // 'millimolar per millisecond'
        const double var_chaste_interface__intracellular_calcium_concentration__d_p_d_environment__time_converter = var_intracellular_calcium_concentration__d_p_d_environment__time; // per_second
        const double var_chaste_interface__intracellular_calcium_concentration__d_p_d_environment__time = 0.001 * var_chaste_interface__intracellular_calcium_concentration__d_p_d_environment__time_converter; // 'per millisecond'
        const double var_chaste_interface__intracellular_potassium_concentration__d_Ki_d_environment__time_converter = var_intracellular_potassium_concentration__d_Ki_d_environment__time; // millimole_per_litre_per_second
        const double var_chaste_interface__intracellular_potassium_concentration__d_Ki_d_environment__time = 0.001 * var_chaste_interface__intracellular_potassium_concentration__d_Ki_d_environment__time_converter; // 'millimolar per millisecond'
        const double d_dt_chaste_interface__hyperpolarising_activated_current_y_gate__y = var_chaste_interface__hyperpolarising_activated_current_y_gate__d_y_d_environment__time; // 'per millisecond'
        const double d_dt_chaste_interface__time_dependent_potassium_current_x_gate__x = var_chaste_interface__time_dependent_potassium_current_x_gate__d_x_d_environment__time; // 'per millisecond'
        const double d_dt_chaste_interface__fast_sodium_current_m_gate__m = var_chaste_interface__fast_sodium_current_m_gate__d_m_d_environment__time; // 'per millisecond'
        const double d_dt_chaste_interface__fast_sodium_current_h_gate__h = var_chaste_interface__fast_sodium_current_h_gate__d_h_d_environment__time; // 'per millisecond'
        const double d_dt_chaste_interface__second_inward_current_d_gate__d = var_chaste_interface__second_inward_current_d_gate__d_d_d_environment__time; // 'per millisecond'
        const double d_dt_chaste_interface__second_inward_current_f_gate__f = var_chaste_interface__second_inward_current_f_gate__d_f_d_environment__time; // 'per millisecond'
        const double d_dt_chaste_interface__second_inward_current_f2_gate__f2 = var_chaste_interface__second_inward_current_f2_gate__d_f2_d_environment__time; // 'per millisecond'
        const double d_dt_chaste_interface__intracellular_sodium_concentration__Nai = var_chaste_interface__intracellular_sodium_concentration__d_Nai_d_environment__time; // 'millimole per litre per millisecond'
        const double d_dt_chaste_interface__intracellular_calcium_concentration__Cai = var_chaste_interface__intracellular_calcium_concentration__d_Cai_d_environment__time; // 'millimole per litre per millisecond'
        const double d_dt_chaste_interface__intracellular_calcium_concentration__Ca_up = var_chaste_interface__intracellular_calcium_concentration__d_Ca_up_d_environment__time; // 'millimole per litre per millisecond'
        const double d_dt_chaste_interface__intracellular_calcium_concentration__Ca_rel = var_chaste_interface__intracellular_calcium_concentration__d_Ca_rel_d_environment__time; // 'millimole per litre per millisecond'
        const double d_dt_chaste_interface__intracellular_calcium_concentration__p = var_chaste_interface__intracellular_calcium_concentration__d_p_d_environment__time; // 'per millisecond'
        const double d_dt_chaste_interface__intracellular_potassium_concentration__Ki = var_chaste_interface__intracellular_potassium_concentration__d_Ki_d_environment__time; // 'millimole per litre per millisecond'
        
        if (mSetVoltageDerivativeToZero)
        {
            d_dt_chaste_interface__membrane__V = 0.0;
        }
        else
        {
            const double var_membrane__C = 6.0000000000000002e-05; // microF
            const double var_hyperpolarising_activated_current__i_f = var_hyperpolarising_activated_current__i_fNa + var_hyperpolarising_activated_current__i_fK; // nanoA
            const double var_membrane__i_f = var_hyperpolarising_activated_current__i_f; // nanoA
            const double var_membrane__i_K = var_time_dependent_potassium_current__i_K; // nanoA
            const double var_membrane__i_K1 = var_time_independent_potassium_current__i_K1; // nanoA
            const double var_membrane__i_Na_b = var_sodium_background_current__i_Na_b; // nanoA
            const double var_membrane__i_Ca_b = var_calcium_background_current__i_Ca_b; // nanoA
            const double var_membrane__i_p = var_sodium_potassium_pump__i_p; // nanoA
            const double var_membrane__i_NaCa = var_Na_Ca_exchanger__i_NaCa; // nanoA
            const double var_membrane__i_Na = var_fast_sodium_current__i_Na; // nanoA
            const double var_second_inward_current__i_si = var_second_inward_current__i_siCa + var_second_inward_current__i_siK + var_second_inward_current__i_siNa; // nanoA
            const double var_membrane__i_si = var_second_inward_current__i_si; // nanoA
            const double var_membrane__d_V_d_environment__time = (-(var_membrane__i_f + var_membrane__i_K + var_membrane__i_K1 + var_membrane__i_Na_b + var_membrane__i_Ca_b + var_membrane__i_p + var_membrane__i_NaCa + var_membrane__i_Na + var_membrane__i_si)) / var_membrane__C; // 'millivolt per second'
            const double var_chaste_interface__membrane__d_V_d_environment__time_converter = var_membrane__d_V_d_environment__time; // ___units_5
            const double var_chaste_interface__membrane__d_V_d_environment__time = 0.001 * var_chaste_interface__membrane__d_V_d_environment__time_converter; // 'millivolt per millisecond'
            d_dt_chaste_interface__membrane__V = var_chaste_interface__membrane__d_V_d_environment__time; // 'millivolt per millisecond'
        }
        
        rDY[0] = d_dt_chaste_interface__membrane__V;
        rDY[1] = d_dt_chaste_interface__hyperpolarising_activated_current_y_gate__y;
        rDY[2] = d_dt_chaste_interface__time_dependent_potassium_current_x_gate__x;
        rDY[3] = d_dt_chaste_interface__fast_sodium_current_m_gate__m;
        rDY[4] = d_dt_chaste_interface__fast_sodium_current_h_gate__h;
        rDY[5] = d_dt_chaste_interface__second_inward_current_d_gate__d;
        rDY[6] = d_dt_chaste_interface__second_inward_current_f_gate__f;
        rDY[7] = d_dt_chaste_interface__second_inward_current_f2_gate__f2;
        rDY[8] = d_dt_chaste_interface__intracellular_sodium_concentration__Nai;
        rDY[9] = d_dt_chaste_interface__intracellular_calcium_concentration__Cai;
        rDY[10] = d_dt_chaste_interface__intracellular_calcium_concentration__Ca_up;
        rDY[11] = d_dt_chaste_interface__intracellular_calcium_concentration__Ca_rel;
        rDY[12] = d_dt_chaste_interface__intracellular_calcium_concentration__p;
        rDY[13] = d_dt_chaste_interface__intracellular_potassium_concentration__Ki;
    }
    
template<>
void OdeSystemInformation<Dynamicnoble_SAN_model_1989FromCellML>::Initialise(void)
{
    this->mSystemName = "Noble_SAN_model_1989";
    this->mFreeVariableName = "environment__time";
    this->mFreeVariableUnits = "millisecond";
    
    // rY[0]:
    this->mVariableNames.push_back("membrane_voltage");
    this->mVariableUnits.push_back("millivolt");
    this->mInitialConditions.push_back(-69.1865);

    // rY[1]:
    this->mVariableNames.push_back("hyperpolarising_activated_current_y_gate__y");
    this->mVariableUnits.push_back("dimensionless");
    this->mInitialConditions.push_back(0.0822);

    // rY[2]:
    this->mVariableNames.push_back("time_dependent_potassium_current_x_gate__x");
    this->mVariableUnits.push_back("dimensionless");
    this->mInitialConditions.push_back(0.1231);

    // rY[3]:
    this->mVariableNames.push_back("fast_sodium_current_m_gate__m");
    this->mVariableUnits.push_back("dimensionless");
    this->mInitialConditions.push_back(0.0365);

    // rY[4]:
    this->mVariableNames.push_back("fast_sodium_current_h_gate__h");
    this->mVariableUnits.push_back("dimensionless");
    this->mInitialConditions.push_back(0.1969);

    // rY[5]:
    this->mVariableNames.push_back("second_inward_current_d_gate__d");
    this->mVariableUnits.push_back("dimensionless");
    this->mInitialConditions.push_back(0);

    // rY[6]:
    this->mVariableNames.push_back("second_inward_current_f_gate__f");
    this->mVariableUnits.push_back("dimensionless");
    this->mInitialConditions.push_back(0.9997);

    // rY[7]:
    this->mVariableNames.push_back("second_inward_current_f2_gate__f2");
    this->mVariableUnits.push_back("dimensionless");
    this->mInitialConditions.push_back(0.5765);

    // rY[8]:
    this->mVariableNames.push_back("intracellular_sodium_concentration__Nai");
    this->mVariableUnits.push_back("millimolar");
    this->mInitialConditions.push_back(7.5);

    // rY[9]:
    this->mVariableNames.push_back("intracellular_calcium_concentration__Cai");
    this->mVariableUnits.push_back("millimolar");
    this->mInitialConditions.push_back(5.6e-5);

    // rY[10]:
    this->mVariableNames.push_back("intracellular_calcium_concentration__Ca_up");
    this->mVariableUnits.push_back("millimolar");
    this->mInitialConditions.push_back(2.3909);

    // rY[11]:
    this->mVariableNames.push_back("intracellular_calcium_concentration__Ca_rel");
    this->mVariableUnits.push_back("millimolar");
    this->mInitialConditions.push_back(0.2207);

    // rY[12]:
    this->mVariableNames.push_back("intracellular_calcium_concentration__p");
    this->mVariableUnits.push_back("dimensionless");
    this->mInitialConditions.push_back(0.237);

    // rY[13]:
    this->mVariableNames.push_back("intracellular_potassium_concentration__Ki");
    this->mVariableUnits.push_back("millimolar");
    this->mInitialConditions.push_back(140);

    this->mInitialised = true;
}


// Serialization for Boost >= 1.36
#include "SerializationExportWrapperForCpp.hpp"
CHASTE_CLASS_EXPORT(Dynamicnoble_SAN_model_1989FromCellML)
extern "C"
{
    AbstractCardiacCellInterface* MakeCardiacCell(
            boost::shared_ptr<AbstractIvpOdeSolver> pSolver,
            boost::shared_ptr<AbstractStimulusFunction> pStimulus)
    {
        return new Dynamicnoble_SAN_model_1989FromCellML(pSolver, pStimulus);
    }
    
}

